# Audit: Census Income Classifier v02 (обновленный)

## Цель файла
Этот документ фиксирует оставшиеся задачи для доведения проекта **Census Income Classifier (v02)** до полностью завершенного и воспроизводимого состояния. 
Сюда включены только те пункты, которые действительно остаются ❌ невыполненными, а также добавлены новые задачи, выявленные в ходе ревизии.

---

## 1. CI/CD

### ❌ GitHub Actions для тестов и линтинга
- В проекте отсутствует каталог `.github/workflows/` с CI-конфигурацией.
- Необходимо настроить автоматический запуск:
  - `pytest` для всех тестов;
  - `flake8` или `ruff` для стиля кода;
  - при желании — `black --check` для форматирования.
- Цель: гарантировать, что при каждом коммите или Pull Request проект собирается и проходит тесты автоматически.

---

## 2. Отчётность и визуализации fairness

### ❌ Сохранение fairness-графиков в `reports/figures_03/`
- Сейчас в папке есть только `Pareto_f1_vs_dp.png`, и то без явного сохранения из кода.
- Требуется явно сохранять все ключевые fairness-графики из ноутбука `03_fairness_and_explainability.ipynb`, например:
  - зависимость метрик (DP, EOD, accuracy) от порога;
  - bar-чарты по метрикам для чувствительных групп;
  - калибровочные кривые по группам;
  - confusion-matrix по группам.
- Использовать `plt.savefig(...)` или `fig.savefig(...)` в блоках построения графиков.

### ❌ Интеграция fairness-графиков в README/отчёт
- Раздел *Fairness* в README показывает только Pareto-кривую.
- Требуется расширить отчётность, добавив визуализации:
  - 2–3 ключевых fairness-графика с пояснениями;
  - ссылки на папку `reports/figures_03/`;
  - краткий анализ (1–2 абзаца) о том, что показывают графики.

---

## 3. Репозиторий и гигиена

### ❌ Расширить `.gitignore`
- Текущий `.gitignore` минимален и содержит опечатку (`__pychache__` вместо `__pycache__`).
- Добавить исключения для:
  - `__pycache__/` и `*.pyc`;
  - `.ipynb_checkpoints/` внутри ноутбуков;
  - временных артефактов (`data/raw/`, `notebooks/data/**/artifacts/`, `notebooks/data/**/models/`);
  - сохранённых моделей (`*.joblib`, `*.pkl`);
  - временных файлов ОС (например, `.DS_Store`, `Thumbs.db`).

### ❌ HTML-версии ноутбуков в `reports/`
- Для удобного просмотра без запуска Jupyter рекомендуется экспортировать ключевые ноутбуки в HTML:
  - `01_data_loading_and_eda.html`;
  - `02_modeling.html`;
  - `03_fairness_and_explainability.html`.
- Хранить их в `reports/`.

### ❌ LICENSE
- В проекте нет файла лицензии.
- Необходимо добавить хотя бы базовую (например, MIT или Apache-2.0), чтобы проект был готов к публичному использованию.

---

## 4. Техническая связность fairness-ноутбука (микро-дефекты, влияющие на воспроизводимость)

### ❌ Чистка и доводка кода `03_fairness_and_explainability.ipynb`
- Встречаются ошибки и артефакты:
  - опечатки (`zero_devision`, вызов `accuracy_score()` без аргументов);
  - неоднозначные переопределения `ART_DIR` (несколько разных вариантов);
  - нет строгого единого пути к артефактам из `02_modeling.ipynb` (сейчас они реально лежат в `notebooks/data/artifacts/`).
- Требуется:
  - устранить опечатки;
  - унифицировать `ART_DIR` (например, `Path('notebooks/data/artifacts')`);
  - убедиться, что все артефакты корректно загружаются из `02`;
  - добавить сохранение всех fairness-графиков в `reports/figures_03/`.

---

## Итог
После выполнения всех перечисленных задач проект будет:
- иметь CI/CD (автоматические тесты и проверки);
- содержать полную отчётность по fairness с графиками;
- обладать чистым и публикуемым репозиторием;
- гарантировать воспроизводимость fairness-ноутбука.